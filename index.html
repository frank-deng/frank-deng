<html>
	<head>
		<meta name='viewport' id='viewport' content='width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no'/>
		<meta charset='UTF-8'>
		<title>Frank's Notes</title>
		<link rel='stylesheet' type='text/css' href='/css/index.css'/>
		<link rel="icon" type="image/png" href="/images/favicon.png"/>
		<script type='text/javascript' src='/js/js.cookie.min.js'></script>

		<script type='text/javascript'>
var getLocale = function(availLang){
	var userLang;
	if (navigator.languages) {
		for(var i=0; i<navigator.languages.length; i++){
			userLang = navigator.languages[i].slice(0,2);
			if (availLang.indexOf(userLang) >= 0) {
				return userLang;
			}
		}
		return 'en';
	} else {
		if (navigator.language) {
			userLang = navigator.language.slice(0,2);
		} else if (navigator.userLanguage) {
			userLang = navigator.userLanguage.slice(0,2);
		} else if (navigator.browserLanguage) {
			userLang = navigator.browserLanguage.slice(0,2);
		}
		return availLang.indexOf(userLang) >= 0 ? userLang : 'en';
	}
}
var lang = Cookies.get('language_preferred');
if ('zh' === lang || (undefined === lang && 'zh' === getLocale(['zh', 'en']))) {
	window.location = '/zh-CN/';
}
		</script>

	</head>
	<body>
		<svg display="none" width="1792" height="1792" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
	<g id="chevron_down" fill="#000000">
		<path d="M1683 808l-742 741q-19 19-45 19t-45-19l-742-741q-19-19-19-45.5t19-45.5l166-165q19-19 45-19t45 19l531 531 531-531q19-19 45-19t45 19l166 165q19 19 19 45.5t-19 45.5z"/>
	</g>
</svg>

		<div id='main_menu'>
	<div class='wrapper'>
		<ul id='main_menu_body'>
			<li class='separator'>选择语言<br/>Select Language</li>
			<li><a id='select_lang_english' href='/'>English</a></li>
			<li><a id='select_lang_chinese' href='/zh-CN/'>中文</a></li>
			<li class='separator'>More</li>
			<li><a href='/tetris.html'>Tetris</a></li>
			<li><a href='/2048.html'>2048</a></li>
			<li><a href='https://github.com/frank-deng/'>View Me On Github</a></li>
		</ul>
	</div>
</div>

		<div class='header-wrapper'>
			<div class='header'>
				<div class='menu-btn' id='menu_btn'>
					<div class='menu-btn-bars'>
						<div class='bar bar1'></div>
						<div class='bar bar2'></div>
						<div class='bar bar3'></div>
					</div>
				</div>
				<h1>
<a class='site-title' href='/'>Frank's Notes</a>

</h1>
			</div>
		</div>
		<div class='main-content'>
			<div>
			
				<a href="/grep_bom.en.html"><h2>How to find out text files with BOM header</h2></a>
				<div class='tag-area'>
					
					Tags: 
					<span class='tag' tag='Shell'>Shell</span>
					
				</div>
				<div class='post-content'>
					<p>Use <code class="highlighter-rouge">find</code> command and <code class="highlighter-rouge">file</code> command:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>find . -type f -exec file {} \; | grep BOM
</code></pre>
</div>

<p>Use <code class="highlighter-rouge">grep</code> command under bash shell:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>grep -rlI $'^\xEF\xBB\xBF' .
</code></pre>
</div>

<p>Exclude files with given extension (Useful to skip binary files and large files):</p>

<div class="highlighter-rouge"><pre class="highlight"><code>grep -rlI $'^\xEF\xBB\xBF' --exclude=*.bin --exclude=*.dat .
find . -type f -not \( -ipath '*.bin' -o -ipath '*.dat' \) -exec file {} \; | grep BOM
</code></pre>
</div>

<p>Exclude <code class="highlighter-rouge">.svn</code> directory:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>grep -rlI $'^\xEF\xBB\xBF' --exclude-dir=.svn .
find . -type f -not \( -ipath '*.svn*' \) -exec file {} \; | grep BOM
</code></pre>
</div>

					<div class='fold-control'>
						<span class='hint-expand'>Expand</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/qpython_webapp.en.html"><h2>Use QPython to test WebView</h2></a>
				<div class='tag-area'>
					
					Tags: 
					<span class='tag' tag='Android'>Android</span><span class='tag' tag='Python'>Python</span>
					
				</div>
				<div class='post-content'>
					<p>Create a python script with the following code:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>#qpy:3
#qpy:webapp:Title
#qpy://127.0.0.1:8080
</code></pre>
</div>

<p><code class="highlighter-rouge">#qpy:webapp:Title</code> specifies the title of the WebView.</p>

<p><code class="highlighter-rouge">#qpy://127.0.0.1:8080</code> specifies the URL launched in the WebView.</p>

<p>Append <code class="highlighter-rouge">#qpy:fullscreen</code> to the code above will enable fullscreen mode for the WebView.</p>


					<div class='fold-control'>
						<span class='hint-expand'>Expand</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/wifi_configuration.en.html"><h2>Wifi Configuration Under Linux Command Line</h2></a>
				<div class='tag-area'>
					
					Tags: 
					<span class='tag' tag='Linux'>Linux</span>
					
				</div>
				<div class='post-content'>
					<h3 id="preparation">Preparation</h3>

<p>Use <code class="highlighter-rouge">ifconfig -a</code> to show all the network interfaces available.</p>

<h3 id="solution-1-connect-to-one-ap-only">Solution 1 (Connect to one AP only)</h3>

<p>Add the following configuration to <code class="highlighter-rouge">/etc/network/interfaces</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>auto wlan0
iface wlan0 inet dhcp
	wpa-ssid "WLAN_SSID"
	wpa-psk "12345678"
</code></pre>
</div>

<p><code class="highlighter-rouge">wlan0</code> should be replaced with the Wifi device in use.</p>

<h3 id="solution-2-connect-to-different-aps-based-on-signal-strength">Solution 2 (Connect to different APs based on signal strength)</h3>

<p><strong>Step 1:</strong> Create <code class="highlighter-rouge">/etc/network/wpa_supplicant.conf</code> with following configuration:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>network={
	ssid="WLAN_AP_1"
	key_mgmt=WPA-PSK
	psk="WLAN_AP_PSK_1"
	priority=1
}
network={
	ssid="WLAN_AP_2"
	key_mgmt=WPA-PSK
	psk="WLAN_AP_PSK_2"
	priority=2
}
</code></pre>
</div>

<p><strong>Step 2:</strong> Add the following configuration to <code class="highlighter-rouge">/etc/network/interfaces</code></p>

<div class="highlighter-rouge"><pre class="highlight"><code>auto wlan0
iface wlan0 inet dhcp
	wpa-conf /etc/network/wpa_supplicant.conf
</code></pre>
</div>

<p><code class="highlighter-rouge">wlan0</code> should be replaced with the Wifi device in use.</p>

					<div class='fold-control'>
						<span class='hint-expand'>Expand</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/record_sound.en.html"><h2>Record System Output Sound In Linux</h2></a>
				<div class='tag-area'>
					
					Tags: 
					<span class='tag' tag='Linux'>Linux</span>
					
				</div>
				<div class='post-content'>
					<p>When pulseaudio is used as the sound server of the system, there is a simple way to record the output sound to file on the command line using <code class="highlighter-rouge">pacat</code> command.</p>

<h3 id="step-1-find-out-the-correct-device">Step 1: Find out the correct device</h3>

<p>In order to find the correct device, you should run this command:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>pacmd list | grep "\.monitor"
</code></pre>
</div>

<p>When you see something like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>	name: &lt;alsa_output.pci-0000_00_1b.0.analog-stereo.monitor&gt;
	alsa_output.pci-0000_00_1b.0.analog-stereo.monitor/#0: Monitor of Built-in Audio Analog Stereo
</code></pre>
</div>

<p>and the soundcard corresponds to the one you want to monitor, you know which device name to use. Here it is:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>alsa_output.pci-0000_00_1b.0.analog-stereo.monitor
</code></pre>
</div>

<h3 id="step-2-start-recording-system-output-sound">Step 2: Start recording system output sound</h3>

<p>Here are examples of how to record system output sound to a <code class="highlighter-rouge">.wav</code> file with CD audio quality.</p>

<p>Command using <code class="highlighter-rouge">sox</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>pacat --record -d alsa_output.pci-0000_00_1b.0.analog-stereo.monitor | sox -t raw -r 44100 -s -L -b 16 -c 2 - output.wav
</code></pre>
</div>

<p>Command using <code class="highlighter-rouge">ffmpeg</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>pacat --record -d alsa_output.pci-0000_00_1b.0.analog-stereo.monitor | ffmpeg -f s16le -ar 44.1k -ac 2 -i pipe:0 record.wav
</code></pre>
</div>


					<div class='fold-control'>
						<span class='hint-expand'>Expand</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/ralink_wifi_fix.en.html"><h2>Fix Unusable Wifi On Asus Laptop Under Debian/Ubuntu</h2></a>
				<div class='tag-area'>
					
					Tags: 
					<span class='tag' tag='Linux'>Linux</span>
					
				</div>
				<div class='post-content'>
					<p>When using Ralink Wifi controller on Asus laptop, you may found that Wifi gets unavailable after installing Debian/Ubuntu. When running command <code class="highlighter-rouge">sudo rfkill list all</code> in terminal, you’ll get the following output:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>0: phy0: Wireless LAN
	Soft blocked: no
	Hard blocked: yes
1: asus-wlan: Wireless LAN
	Soft blocked: no
	Hard blocked: no
</code></pre>
</div>

<h3 id="how-to-fix-wifi">How to fix Wifi</h3>

<p>Create <code class="highlighter-rouge">/etc/modprobe.d/asus.conf</code> with the following configuration:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>options asus_nb_wmi wapf=4
</code></pre>
</div>

<p>Then reboot.</p>

					<div class='fold-control'>
						<span class='hint-expand'>Expand</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/perl_rename.en.html"><h2>Batch Renaming Using Perl's Rename Utility</h2></a>
				<div class='tag-area'>
					
					Tags: 
					<span class='tag' tag='Shell'>Shell</span>
					
				</div>
				<div class='post-content'>
					<p>Remove <code class="highlighter-rouge">.bak</code> extension:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>prename 's/\.bak$//' *
</code></pre>
</div>

<p>Convert filenames into lower case:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>prename 'y/A-Z/a-z/' *
</code></pre>
</div>

<p>Add prefix for <code class="highlighter-rouge">.txt</code> files:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>prename 's/(.*).txt$/prefix_$1.txt/' *.txt
</code></pre>
</div>

<p>On ArchLinux, you must install package <code class="highlighter-rouge">perl-rename</code> for this utility.</p>

					<div class='fold-control'>
						<span class='hint-expand'>Expand</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/change_time.en.html"><h2>Change Date/Time/Timezone Under Linux</h2></a>
				<div class='tag-area'>
					
					Tags: 
					<span class='tag' tag='Linux'>Linux</span>
					
				</div>
				<div class='post-content'>
					<p>Change date: <code class="highlighter-rouge">date -s MM/DD/YYYY</code></p>

<p>Change time: <code class="highlighter-rouge">date -s hh:mm:ss</code></p>

<p>Change timezone: <code class="highlighter-rouge">sudo dpkg-reconfigure tzdata</code></p>

					<div class='fold-control'>
						<span class='hint-expand'>Expand</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/vim_tabsize.en.html"><h2>Adjust Tab Size For VIM</h2></a>
				<div class='tag-area'>
					
					Tags: 
					<span class='tag' tag='Linux'>Linux</span>
					
				</div>
				<div class='post-content'>
					<p>Add the following lines to <code class="highlighter-rouge">/etc/vim/vimrc</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>set tabstop=4
set softtabstop=4
set shiftwidth=4
</code></pre>
</div>

					<div class='fold-control'>
						<span class='hint-expand'>Expand</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/console_autologin.en.html"><h2>Configure autologin for Linux console using systemd</h2></a>
				<div class='tag-area'>
					
					Tags: 
					<span class='tag' tag='Linux'>Linux</span>
					
				</div>
				<div class='post-content'>
					<p>Firstly, Create directory <code class="highlighter-rouge">/etc/systemd/system/getty@tty1.service.d/</code> if not exist.</p>

<p>Then create file <code class="highlighter-rouge">/etc/systemd/system/getty@tty1.service.d/autologin.conf</code> with the following content:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[Service]
ExecStart=
ExecStart=-/sbin/agetty --autologin username --noclear %I $TERM
</code></pre>
</div>

<p>Then save and reboot.</p>


					<div class='fold-control'>
						<span class='hint-expand'>Expand</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/alsa_44100hz.en.html"><h2>Improve Sound Quality for ALSA</h2></a>
				<div class='tag-area'>
					
					Tags: 
					<span class='tag' tag='Linux'>Linux</span>
					
				</div>
				<div class='post-content'>
					<p>Open <code class="highlighter-rouge">/usr/share/alsa/alsa.conf</code>, then change <code class="highlighter-rouge">defaults.pcm.dmix.rate 48000</code> into <code class="highlighter-rouge">defaults.pcm.dmix.rate 44100</code>.</p>

					<div class='fold-control'>
						<span class='hint-expand'>Expand</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/handlelidswitch.en.html"><h2>Keep Laptop Running When Closing Lid</h2></a>
				<div class='tag-area'>
					
					Tags: 
					<span class='tag' tag='Linux'>Linux</span>
					
				</div>
				<div class='post-content'>
					<p>Edit <code class="highlighter-rouge">/etc/systemd/login.conf</code> and change the value of <code class="highlighter-rouge">HandleLidSwitch</code> to <code class="highlighter-rouge">ignore</code>.</p>

					<div class='fold-control'>
						<span class='hint-expand'>Expand</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/enum_args.en.html"><h2>Enumerate command line arguments with space characters</h2></a>
				<div class='tag-area'>
					
					Tags: 
					<span class='tag' tag='Shell'>Shell</span>
					
				</div>
				<div class='post-content'>
					<div class="highlighter-rouge"><pre class="highlight"><code>while [ -n "${1}" ]; do
	FILENAME="${1}";
	#Do some works on "${FILENAME}"
	shift 1;
done;
</code></pre>
</div>

					<div class='fold-control'>
						<span class='hint-expand'>Expand</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/enum_lines.en.html"><h2>Enumerate records separated by newlines</h2></a>
				<div class='tag-area'>
					
					Tags: 
					<span class='tag' tag='Shell'>Shell</span>
					
				</div>
				<div class='post-content'>
					<div class="highlighter-rouge"><pre class="highlight"><code>IFS=$'\n';
for LINE in `ls`; do
	#Do some works on "${LINE}"
done;
</code></pre>
</div>

					<div class='fold-control'>
						<span class='hint-expand'>Expand</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/filename_parse.en.html"><h2>Extract basename and extension of a filename under bash shell</h2></a>
				<div class='tag-area'>
					
					Tags: 
					<span class='tag' tag='Shell'>Shell</span>
					
				</div>
				<div class='post-content'>
					<div class="highlighter-rouge"><pre class="highlight"><code>BASENAME="${FILENAME%.*}";
EXTENSION="${FILENAME##*.}";
</code></pre>
</div>

					<div class='fold-control'>
						<span class='hint-expand'>Expand</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/html5_video_conv.en.html"><h2>Convert video into HTML5 compatible format</h2></a>
				<div class='tag-area'>
					
					Tags: 
					<span class='tag' tag='Shell'>Shell</span>
					
				</div>
				<div class='post-content'>
					<div class="highlighter-rouge"><pre class="highlight"><code>ffmpeg -i INPUT_FILE -c:v libx264 -crf 18 -c:a aac -q:a 100 -strict experimental OUTPUT.mp4
</code></pre>
</div>


					<div class='fold-control'>
						<span class='hint-expand'>Expand</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/crontab_reboot.en.html"><h2>Run program at startup via crontab</h2></a>
				<div class='tag-area'>
					
					Tags: 
					<span class='tag' tag='Linux'>Linux</span>
					
				</div>
				<div class='post-content'>
					<p>Add the following content to <code class="highlighter-rouge">/etc/crontab</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>@reboot    username    /path/to/script arguments
</code></pre>
</div>


					<div class='fold-control'>
						<span class='hint-expand'>Expand</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/address_bar_color.en.html"><h2>Chrome for Android: Change address bar color</h2></a>
				<div class='tag-area'>
					
					Tags: 
					<span class='tag' tag='HTML'>HTML</span>
					
				</div>
				<div class='post-content'>
					<p>Add the following meta tag into HTML to change address bar color in Chrome for Android.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;meta name="theme-color" content="#db5945"/&gt;
</code></pre>
</div>


					<div class='fold-control'>
						<span class='hint-expand'>Expand</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/browser_type.en.html"><h2>Get browser type based on User Agent</h2></a>
				<div class='tag-area'>
					
					Tags: 
					<span class='tag' tag='HTML'>HTML</span><span class='tag' tag='JavaScript'>JavaScript</span>
					
				</div>
				<div class='post-content'>
					<div class="highlighter-rouge"><pre class="highlight"><code>function deviceType() {
	var ua = window.navigator.userAgent;
	if (/iphone|android.*mobile/i.test(ua)) {
		return 'mobile';
	} else if (/ipad|android/i.test(ua)) {
		return 'pad';
	}
	return undefined;
}
</code></pre>
</div>

<p>This function returns <code class="highlighter-rouge">mobile</code> for mobile browsers, <code class="highlighter-rouge">pad</code> for tablet browsers. <code class="highlighter-rouge">undefined</code> for PC browsers or browsers of other type.</p>


					<div class='fold-control'>
						<span class='hint-expand'>Expand</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/htmlspecialchars.en.html"><h2>Implement htmlspecialchars() in JavaScript</h2></a>
				<div class='tag-area'>
					
					Tags: 
					<span class='tag' tag='HTML'>HTML</span><span class='tag' tag='JavaScript'>JavaScript</span>
					
				</div>
				<div class='post-content'>
					<div class="highlighter-rouge"><pre class="highlight"><code>function htmlspecialchars(s){
	var M={'&amp;':'&amp;amp;','&lt;':'&amp;lt;','&gt;':'&amp;gt;','"':'&amp;quot;',"'":'&amp;#039;'};
	return s.replace(/[&amp;&lt;&gt;"']/g,function(m){return M[m]});
}
</code></pre>
</div>


					<div class='fold-control'>
						<span class='hint-expand'>Expand</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
			</div>
		</div>
	</body>
	<script type='text/javascript'>
var POST_MAX_HEIGHT = 150;

document.getElementById('select_lang_english').addEventListener('click', function(){
	Cookies.set('language_preferred', 'en');
});
document.getElementById('select_lang_chinese').addEventListener('click', function(){
	Cookies.set('language_preferred', 'zh');
});

var main_menu = document.getElementById('main_menu');
document.body.addEventListener('click', function(event){
	main_menu.classList.remove('menu-display');
});
document.getElementById('menu_btn').addEventListener('click', function(event){
	event.stopPropagation();
	main_menu.classList.toggle('menu-display');
	return false;
});
document.getElementById('main_menu_body').addEventListener('click', function(event){
	event.stopPropagation();
	return false;
});

var post_content_all = document.querySelectorAll('.post-content');
for (var i = 0; i < post_content_all.length; i++) {
	var post_content = post_content_all[i];
	if (post_content.offsetHeight > POST_MAX_HEIGHT) {
		post_content.classList.add('post-content-long');
	}
	post_content.querySelector('.fold-control').addEventListener('click', function(){
		this.parentNode.classList.remove('post-content-long');
	});
}
	</script>
</html>

