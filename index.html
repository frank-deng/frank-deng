<html>
	<head>
		<meta name='viewport' id='viewport' content='width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no'/>
		<meta charset='UTF-8'>
		<title>Frank的笔记</title>
		<link rel='stylesheet' type='text/css' href='/css/index.css'/>
		<link rel="icon" type="image/png" href="/images/favicon.png"/>
	</head>
	<body>
		<svg display="none" width="1792" height="1792" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
	<g id="chevron_down" fill="#000000">
		<path d="M1683 808l-742 741q-19 19-45 19t-45-19l-742-741q-19-19-19-45.5t19-45.5l166-165q19-19 45-19t45 19l531 531 531-531q19-19 45-19t45 19l166 165q19 19 19 45.5t-19 45.5z"/>
	</g>
</svg>

		<div id='main_menu'>
	<div class='wrapper'>
		<ul id='main_menu_body'>
			<li><a href='https://github.com/frank-deng/'>View Me On Github</a></li>
		</ul>
	</div>
</div>

		<div class='header-wrapper'>
			<div class='header'>
				<div class='menu-btn' id='menu_btn'>
					<div class='menu-btn-bars'>
						<div class='bar bar1'></div>
						<div class='bar bar2'></div>
						<div class='bar bar3'></div>
					</div>
				</div>

				<h1><a class='site-title' href='/'>Frank的笔记</a></h1>
			</div>
		</div>
		<div class='main-content'>
			<div>
			
				<a href="/mysql-grant.zh-CN.html"><h2>如何解决赋予/收回用户权限时发生Access Denied的情况</h2></a>
				<div class='tag-area'>
					
					标签：
					<span class='tag' tag='MySQL'>MySQL</span>
					
				</div>
				<div class='post-content'>
					<ol>
  <li>停止MySQL服务。</li>
  <li>使用命令<code class="highlighter-rouge">mysqld_safe --skip-grant-table</code>启动MySQL数据库服务。</li>
  <li>进行用户权限的赋予、收回操作。</li>
  <li>将第2步启动的<code class="highlighter-rouge">mysqld_safe</code>进程杀掉。</li>
  <li>重启MySQL服务。</li>
</ol>


					<div class='fold-control'>
						<span class='hint-expand'>展开</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/js-catch-syntax-error.zh-CN.html"><h2>如何在浏览器中捕获JS的语法错误</h2></a>
				<div class='tag-area'>
					
					标签：
					<span class='tag' tag='HTML'>HTML</span><span class='tag' tag='JavaScript'>JavaScript</span>
					
				</div>
				<div class='post-content'>
					<p>在<code class="highlighter-rouge">&lt;head&gt;</code>标签中添加以下代码：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;script type='text/javascript'&gt;
    window.addEventListener('error',function(e){
        alert(e.filename+'\nLine '+e.lineno+'\n'+e.message);
    });
&lt;/script&gt;
</code></pre></div></div>


					<div class='fold-control'>
						<span class='hint-expand'>展开</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/pdo-mysql-utf8.zh-CN.html"><h2>如何解决PDO-MySQL的乱码问题</h2></a>
				<div class='tag-area'>
					
					标签：
					<span class='tag' tag='PHP'>PHP</span><span class='tag' tag='MySQL'>MySQL</span>
					
				</div>
				<div class='post-content'>
					<p>使用如下DSN初始化PDO-MySQL连接：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$dsn='mysql:dbname=sausagedb;host=127.0.0.1;charset=utf8'
$dbconn = new PDO($dsn, $user, $password);
</code></pre></div></div>

<p>上面的DSN中包含<code class="highlighter-rouge">charset=utf8</code>，用于指定MySQL所使用的字符集为UTF-8。</p>

<p>如果连接数据库时不设置字符集，即使MySQL表的字符集是UTF-8，插入到MySQL表中的内容也将变为乱码。</p>

					<div class='fold-control'>
						<span class='hint-expand'>展开</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/grep_bom.zh-CN.html"><h2>如何找出带BOM头的文本文件</h2></a>
				<div class='tag-area'>
					
					标签：
					<span class='tag' tag='Shell'>Shell</span>
					
				</div>
				<div class='post-content'>
					<p>使用<code class="highlighter-rouge">find</code>命令和<code class="highlighter-rouge">file</code>命令：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find . -type f -exec file {} \; | grep BOM
</code></pre></div></div>

<p>在bash shell中使用<code class="highlighter-rouge">grep</code>命令：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>grep -rlI $'^\xEF\xBB\xBF' .
</code></pre></div></div>

<p>排除特定扩展名的文件（可用于跳过二进制文件和大文件）：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>grep -rlI $'^\xEF\xBB\xBF' --exclude=*.bin --exclude=*.dat .
find . -type f -not \( -ipath '*.bin' -o -ipath '*.dat' \) -exec file {} \; | grep BOM
</code></pre></div></div>

<p>排除<code class="highlighter-rouge">.svn</code>目录：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>grep -rlI $'^\xEF\xBB\xBF' --exclude-dir=.svn .
find . -type f -not \( -ipath '*.svn*' \) -exec file {} \; | grep BOM
</code></pre></div></div>

					<div class='fold-control'>
						<span class='hint-expand'>展开</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/qpython_webapp.zh-CN.html"><h2>使用QPython测试WebView</h2></a>
				<div class='tag-area'>
					
					标签：
					<span class='tag' tag='Android'>Android</span><span class='tag' tag='Python'>Python</span>
					
				</div>
				<div class='post-content'>
					<p>新建一个Python脚本，代码如下：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#qpy:3
#qpy:webapp:Title
#qpy://127.0.0.1:8080
</code></pre></div></div>

<p><code class="highlighter-rouge">#qpy:webapp:Title</code>用于设置WebView的标题。</p>

<p><code class="highlighter-rouge">#qpy://127.0.0.1:8080</code>用于设置WebView中打开的URL。</p>

<p>在上述代码末尾添加<code class="highlighter-rouge">#qpy:fullscreen</code>可以使WebView以全屏方式打开。</p>


					<div class='fold-control'>
						<span class='hint-expand'>展开</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/wifi_configuration.zh-CN.html"><h2>Linux命令行下配置Wifi</h2></a>
				<div class='tag-area'>
					
					标签：
					<span class='tag' tag='Linux'>Linux</span>
					
				</div>
				<div class='post-content'>
					<p>###前期准备</p>

<p>使用<code class="highlighter-rouge">ifconfig -a</code>命令获取所有可用的网络设备。</p>

<p>###方案1（只需连1个路由器）</p>

<p>将以下配置加入到<code class="highlighter-rouge">/etc/network/interfaces</code>中：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>auto wlan0
iface wlan0 inet dhcp
	wpa-ssid "WLAN_SSID"
	wpa-psk "12345678"
</code></pre></div></div>

<p>其中<code class="highlighter-rouge">wlan0</code>需要换成需要使用的Wifi设备。</p>

<p>###方案2（根据信号强度连接不同路由器）</p>

<p><strong>第1步：</strong>创建<code class="highlighter-rouge">/etc/network/wpa_supplicant.conf</code>，并添加以下配置：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>network={
	ssid="WLAN_SSID_1"
	key_mgmt=WPA-PSK
	psk="WLAN_AP_PSK_1"
	priority=1
}
network={
	ssid="WLAN_SSID_2"
	key_mgmt=WPA-PSK
	psk="WLAN_AP_PSK_2"
	priority=2
}
</code></pre></div></div>

<p><strong>第2步：</strong>将以下配置加入到<code class="highlighter-rouge">/etc/network/interfaces</code>中：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>auto wlan0
iface wlan0 inet dhcp
	wpa-conf /etc/network/wpa_supplicant.conf
</code></pre></div></div>

<p>其中<code class="highlighter-rouge">wlan0</code>需要换成需要使用的Wifi设备。</p>

					<div class='fold-control'>
						<span class='hint-expand'>展开</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/record_sound.zh-CN.html"><h2>Linux命令行下捕获系统声音</h2></a>
				<div class='tag-area'>
					
					标签：
					<span class='tag' tag='Linux'>Linux</span>
					
				</div>
				<div class='post-content'>
					<p>当pulseaudio被用于管理系统声音时，可以在命令行环境下使用<code class="highlighter-rouge">pacat</code>命令捕获系统声音。</p>

<p>###步骤1：找到用于捕获系统声音的设备</p>

<p>使用以下命令找到用于捕获系统声音的设备：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pacmd list | grep "\.monitor"
</code></pre></div></div>

<p>当看到如下输出时：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	name: &lt;alsa_output.pci-0000_00_1b.0.analog-stereo.monitor&gt;
	alsa_output.pci-0000_00_1b.0.analog-stereo.monitor/#0: Monitor of Built-in Audio Analog Stereo
</code></pre></div></div>

<p>就可以找到用于捕获系统声音的设备了。在上述输出内容中，可以找到设备名如下：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>alsa_output.pci-0000_00_1b.0.analog-stereo.monitor
</code></pre></div></div>

<p>###步骤2：开始捕获系统声音</p>

<p>以下例子描述了如何将系统声音拷贝到<code class="highlighter-rouge">.wav</code>文件中，并使用CD音质。</p>

<p>使用<code class="highlighter-rouge">sox</code>的命令:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pacat --record -d alsa_output.pci-0000_00_1b.0.analog-stereo.monitor | sox -t raw -r 44100 -s -L -b 16 -c 2 - output.wav
</code></pre></div></div>

<p>使用<code class="highlighter-rouge">ffmpeg</code>的命令:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pacat --record -d alsa_output.pci-0000_00_1b.0.analog-stereo.monitor | ffmpeg -f s16le -ar 44.1k -ac 2 -i pipe:0 record.wav
</code></pre></div></div>

					<div class='fold-control'>
						<span class='hint-expand'>展开</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/ralink_wifi_fix.zh-CN.html"><h2>Debian/Ubuntu下修复华硕笔记本的Wifi</h2></a>
				<div class='tag-area'>
					
					标签：
					<span class='tag' tag='Linux'>Linux</span>
					
				</div>
				<div class='post-content'>
					<p>如果华硕笔记本上的Wifi模块是Ralink的，安装完Debian/Ubuntu后会出现Wifi无法使用的情况。同时在终端运行<code class="highlighter-rouge">sudo rfkill list all</code>命令后会有如下输出：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>0: phy0: Wireless LAN
	Soft blocked: no
	Hard blocked: yes
1: asus-wlan: Wireless LAN
	Soft blocked: no
	Hard blocked: no
</code></pre></div></div>

<p>###如何修复Wifi</p>

<p>创建<code class="highlighter-rouge">/etc/modprobe.d/asus.conf</code>，并在文件中添加如下内容：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>options asus_nb_wmi wapf=4
</code></pre></div></div>

<p>然后重启。</p>

					<div class='fold-control'>
						<span class='hint-expand'>展开</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/perl_rename.zh-CN.html"><h2>如何使用Perl的rename工具进行批量重命名</h2></a>
				<div class='tag-area'>
					
					标签：
					<span class='tag' tag='Shell'>Shell</span>
					
				</div>
				<div class='post-content'>
					<p>去除<code class="highlighter-rouge">.bak</code>扩展名：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>prename 's/\.bak$//' *
</code></pre></div></div>

<p>将文件名转换成小写：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>prename 'y/A-Z/a-z/' *
</code></pre></div></div>

<p>为<code class="highlighter-rouge">.txt</code>文件加前缀：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>prename 's/(.*).txt$/prefix_$1.txt/' *.txt
</code></pre></div></div>

<p>ArchLinux上需要安装<code class="highlighter-rouge">perl-rename</code>包来获得该工具。</p>

					<div class='fold-control'>
						<span class='hint-expand'>展开</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/change_time.zh-CN.html"><h2>Linux下更改日期、时间、时区</h2></a>
				<div class='tag-area'>
					
					标签：
					<span class='tag' tag='Linux'>Linux</span>
					
				</div>
				<div class='post-content'>
					<p>更改日期：<code class="highlighter-rouge">date -s MM/DD/YYYY</code></p>

<p>更改时间：<code class="highlighter-rouge">date -s hh:mm:ss</code></p>

<p>更改时区：<code class="highlighter-rouge">sudo dpkg-reconfigure tzdata</code></p>

					<div class='fold-control'>
						<span class='hint-expand'>展开</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/vim_tabsize.zh-CN.html"><h2>调整VIM的制表符宽度</h2></a>
				<div class='tag-area'>
					
					标签：
					<span class='tag' tag='Linux'>Linux</span>
					
				</div>
				<div class='post-content'>
					<p>将以下行加入到<code class="highlighter-rouge">/etc/vim/vimrc</code>中：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>set tabstop=4
set softtabstop=4
set shiftwidth=4
</code></pre></div></div>

					<div class='fold-control'>
						<span class='hint-expand'>展开</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/alsa_44100hz.zh-CN.html"><h2>提升ALSA播放时的音质</h2></a>
				<div class='tag-area'>
					
					标签：
					<span class='tag' tag='Linux'>Linux</span>
					
				</div>
				<div class='post-content'>
					<p>打开<code class="highlighter-rouge">/usr/share/alsa/alsa.conf</code>，然后将<code class="highlighter-rouge">defaults.pcm.dmix.rate 48000</code>更改为<code class="highlighter-rouge">defaults.pcm.dmix.rate 44100</code>。</p>

					<div class='fold-control'>
						<span class='hint-expand'>展开</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/enum_args.zh-CN.html"><h2>Bash Shell遍历带空格的命令行参数</h2></a>
				<div class='tag-area'>
					
					标签：
					<span class='tag' tag='Shell'>Shell</span>
					
				</div>
				<div class='post-content'>
					<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>while [ -n "${1}" ]; do
	FILENAME="${1}";
	#Do some works on "${FILENAME}"
	shift 1;
done;
</code></pre></div></div>

					<div class='fold-control'>
						<span class='hint-expand'>展开</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/enum_lines.zh-CN.html"><h2>Bash Shell按行遍历标准输出</h2></a>
				<div class='tag-area'>
					
					标签：
					<span class='tag' tag='Shell'>Shell</span>
					
				</div>
				<div class='post-content'>
					<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>IFS=$'\n';
for LINE in `ls`; do
	#Do some works on "${LINE}"
done;
</code></pre></div></div>

					<div class='fold-control'>
						<span class='hint-expand'>展开</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/filename_parse.zh-CN.html"><h2>Bash Shell从给定文件名中获取基本名和扩展名</h2></a>
				<div class='tag-area'>
					
					标签：
					<span class='tag' tag='Shell'>Shell</span>
					
				</div>
				<div class='post-content'>
					<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>BASENAME="${FILENAME%.*}";
EXTENSION="${FILENAME##*.}";
</code></pre></div></div>

					<div class='fold-control'>
						<span class='hint-expand'>展开</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/html5_video_conv.zh-CN.html"><h2>将视频转换成兼容HTML5的格式</h2></a>
				<div class='tag-area'>
					
					标签：
					<span class='tag' tag='Shell'>Shell</span>
					
				</div>
				<div class='post-content'>
					<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ffmpeg -i INPUT_FILE -c:v libx264 -crf 18 -c:a aac -q:a 100 -strict experimental OUTPUT.mp4
</code></pre></div></div>


					<div class='fold-control'>
						<span class='hint-expand'>展开</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/crontab_reboot.zh-CN.html"><h2>使用crontab实现开机自动运行脚本</h2></a>
				<div class='tag-area'>
					
					标签：
					<span class='tag' tag='Linux'>Linux</span>
					
				</div>
				<div class='post-content'>
					<p>将以下内容加入到<code class="highlighter-rouge">/etc/crontab</code>中：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@reboot    username    /path/to/script arguments
</code></pre></div></div>


					<div class='fold-control'>
						<span class='hint-expand'>展开</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/address_bar_color.zh-CN.html"><h2>Chrome for Android中更改地址栏的颜色</h2></a>
				<div class='tag-area'>
					
					标签：
					<span class='tag' tag='HTML'>HTML</span>
					
				</div>
				<div class='post-content'>
					<p>将以下标签加到HTML的head标签中，就可以改变Chrome for Android的地址栏颜色了。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;meta name="theme-color" content="#db5945"/&gt;
</code></pre></div></div>


					<div class='fold-control'>
						<span class='hint-expand'>展开</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/browser_type.zh-CN.html"><h2>通过User Agent获取浏览器类型</h2></a>
				<div class='tag-area'>
					
					标签：
					<span class='tag' tag='HTML'>HTML</span><span class='tag' tag='JavaScript'>JavaScript</span>
					
				</div>
				<div class='post-content'>
					<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function deviceType() {
	var ua = window.navigator.userAgent;
	if (/iphone|android.*mobile/i.test(ua)) {
		return 'mobile';
	} else if (/ipad|android/i.test(ua)) {
		return 'pad';
	}
	return undefined;
}
</code></pre></div></div>

<p>手机浏览器返回<code class="highlighter-rouge">mobile</code>，平板浏览器返回<code class="highlighter-rouge">pad</code>，PC浏览器和其它类型的浏览器返回<code class="highlighter-rouge">undefined</code>。</p>


					<div class='fold-control'>
						<span class='hint-expand'>展开</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
				<a href="/htmlspecialchars.zh-CN.html"><h2>htmlspecialchars()的JavaScript实现</h2></a>
				<div class='tag-area'>
					
					标签：
					<span class='tag' tag='HTML'>HTML</span><span class='tag' tag='JavaScript'>JavaScript</span>
					
				</div>
				<div class='post-content'>
					<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function htmlspecialchars(s){
	var M={'&amp;':'&amp;amp;','&lt;':'&amp;lt;','&gt;':'&amp;gt;','"':'&amp;quot;',"'":'&amp;#039;'};
	return s.replace(/[&amp;&lt;&gt;"']/g,function(m){return M[m]});
}
</code></pre></div></div>


					<div class='fold-control'>
						<span class='hint-expand'>展开</span>
						<svg class='chevron-down' viewBox="0 0 1792 1792"><use xlink:href='#chevron_down'></use></svg>
					</div>
				</div>
				<hr/>
			
			</div>
		</div>
	</body>
	<script type='text/javascript'>
var POST_MAX_HEIGHT = 150;

var main_menu = document.getElementById('main_menu');
document.body.addEventListener('click', function(event){
	main_menu.classList.remove('menu-display');
});
document.getElementById('menu_btn').addEventListener('click', function(event){
	event.stopPropagation();
	main_menu.classList.toggle('menu-display');
	return false;
});
document.getElementById('main_menu_body').addEventListener('click', function(event){
	event.stopPropagation();
	return false;
});

var post_content_all = document.querySelectorAll('.post-content');
for (var i = 0; i < post_content_all.length; i++) {
	var post_content = post_content_all[i];
	if (post_content.offsetHeight > POST_MAX_HEIGHT) {
		post_content.classList.add('post-content-long');
	}
	post_content.querySelector('.fold-control').addEventListener('click', function(){
		this.parentNode.classList.remove('post-content-long');
	});
}
	</script>
</html>

